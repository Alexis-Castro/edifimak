---
import Category from "./Category.astro";

// fetch api a categorias
// const url = `https://api.escuelajs.co/api/v1/categories`;
const url = `https://edifimaksystem.com/Api_Edifimak/categoria/axeijclkxcdz`;
const resp = await fetch(url);
const { data } = await resp.json();

// console.log(data);

---

<div class="w-full mx-auto bg-slate-900">
   <div class="border-t border-[#ffffff1a]"></div>
</div>
<section class="py-12 px-1 lg:py-24 lg:px-14 bg-slate-900" >
   <div class="container relative space-y-10 2xl:max-w-[1344px]">
      <div class="md:flex items-center justify-center">
         <div class="block basis-0 flex-shrink flex-grow p-2 text-center">
            <h2
               class="text-xl lg:text-2xl leading-tight font-bold after:w-10 after:h-1 after:mx-auto after:mt-4 after:bg-[#019939] after:block after:rounded text-white"
            >
               Categor√≠as
            </h2>
         </div>
      </div>

      <div
         class="mx-auto grid gap-x-3 gap-y-6 lg:gap-y-12 lg:gap-x-6 justify-items-center" id="categorias"
      >
         {
            data.categ?.slice(0, 10).map((categories: { description: string; img: string; }) => (
               <Category
                  name={ categories.description }
                  image={ categories.img }
               />
              
            ))
         }
      </div>
   </div>
</section>

<style >
   #categorias {
      display: grid;
      grid-template-columns: repeat( auto-fill,minmax( min(100%, 195px), 1fr) );
   }
   @media (min-width: 1024px) {
      #categorias {
         grid-template-columns: repeat( auto-fill,minmax( min(100%, 270px),1fr) );
      }

   }
</style>
